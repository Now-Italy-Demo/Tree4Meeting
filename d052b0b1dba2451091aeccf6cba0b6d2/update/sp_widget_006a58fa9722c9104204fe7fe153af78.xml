<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope) {

	var c = this;
	var resetURL = "https://digitalex.service-now.com/api/x_snc_tree4meeting/compensazione/cleanall";
	
	c.reset = function(){
		console.log("reset")				
		$.get(resetURL, function(data){
			console.log(data)
		});
	}
	
	c.test = function(){
		console.log("test")				
	}

};]]></client_script>
        <controller_as>c</controller_as>
        <css>.card{&#13;
  box-shadow: 0 0.4rem 0.8rem 0 rgba(23, 40, 52 , 8%);&#13;
  min-height: 20rem;&#13;
  background-color: #ffffff;&#13;
  margin-bottom: 1rem;&#13;
  border-radius: .6rem;&#13;
  padding: 3rem;&#13;
  margin-top: 3rem;&#13;
}&#13;
&#13;
.card-title{&#13;
  font-weight: 600;&#13;
  font-size: 2.4rem;&#13;
  margin-bottom: 3rem;&#13;
}&#13;
&#13;
.column-title{&#13;
  font-weight:600;&#13;
  font-size:1.6rem;&#13;
  margin-bottom:1rem;&#13;
}&#13;
&#13;
.column-height{&#13;
//  min-height: 51.2rem;&#13;
}&#13;
&#13;
.value{&#13;
  font-size:4rem;&#13;
  margin-top: 1.5rem;&#13;
}&#13;
&#13;
.mini-graph{&#13;
  margin-bottom: -10px;&#13;
}&#13;
.graph{&#13;
  margin-top: 3.3rem;&#13;
}&#13;
&#13;
&#13;
.val-caption{&#13;
  font-size:1.4rem;&#13;
  color: $text-secondary;&#13;
}&#13;
&#13;
.val-unit{&#13;
  font-size:1.4rem;&#13;
  margin-left: -8px;&#13;
  color: $success;&#13;
}&#13;
&#13;
.description{&#13;
  font-size:1.4rem;&#13;
  text-align:justify;&#13;
  margin:20px 0px;&#13;
}&#13;
&#13;
.progress{&#13;
  height: 1.5rem;&#13;
}&#13;
&#13;
.esg{&#13;
  margin-bottom: 4px;&#13;
}&#13;
&#13;
.progress-bar{&#13;
  background-color:$success;&#13;
}&#13;
&#13;
.btn-esg{&#13;
	color: $success;&#13;
  margin-top:2rem;&#13;
}&#13;
&#13;
#esgchart{&#13;
  text-align: -webkit-center;&#13;
  margin-top:2rem;&#13;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>t4m_out_esg_impact</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>T4M - Our ESG Impact </name>
        <option_schema>[{"name":"currency","section":"other","default_value":"USD","label":"Currency","type":"string"},{"name":"symbol","section":"other","default_value":"$","label":"Symbol","type":"string"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	/* populate the 'data' object */
	/* e.g., data.table = $sp.getValue('table'); */
	
	data.currency = "USD";
	data.symbol = "$";
	
	data.isAdmin = false;
	
	if (gs.hasRole("admin")){
		data.isAdmin= true;
	}

	if(options.currency){
		data.currency = options.currency
	}
	if(options.symbol){
		data.symbol = options.symbol;
	}

	var gr = new GlideRecord('sn_ex_sp_pro_customers');
	gr.addEncodedQuery('u_active=true');
	gr.orderByDesc('sys_updated_on');
	gr.query();
	if(gr.next()){
		data.success = gr.getValue('u_success');
		data.warning = gr.getValue('u_warning');
		data.danger = gr.getValue('u_danger');
		data.info = gr.getValue('u_info');
	}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>francesco</sys_created_by>
        <sys_created_on>2022-04-02 17:18:34</sys_created_on>
        <sys_id>006a58fa9722c9104204fe7fe153af78</sys_id>
        <sys_mod_count>8</sys_mod_count>
        <sys_name>T4M - Our ESG Impact </sys_name>
        <sys_package display_value="Tree4Meeting" source="x_snc_tree4meeting">d052b0b1dba2451091aeccf6cba0b6d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Tree4Meeting">d052b0b1dba2451091aeccf6cba0b6d2</sys_scope>
        <sys_update_name>sp_widget_006a58fa9722c9104204fe7fe153af78</sys_update_name>
        <sys_updated_by>antonio</sys_updated_by>
        <sys_updated_on>2022-04-04 15:50:11</sys_updated_on>
        <template><![CDATA[<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<div id = "esg-impact" ng-if="c.data.isAdmin">
  <div class = "card">
    <div class = "card-title">
      Altre iniziative ESG
    </div>
    <div class = "row">
      <div class = "col-md-4 column-height">
        <div class = 'column-title'>
          Organization ESG profile
        </div>
        <div class = "value">
          81/100
        </div>
        <div class= "val-caption">
          Organization ESG Score
        </div>
        <div class = "graph">
          <div class= "esg">
            Environmental Impact
          </div>
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="84" aria-valuemin="0" aria-valuemax="100" style="width:84%">
              <span class="sr-only">84% Complete</span>
            </div>
          </div>

          <div class= "esg">
            Social Impact
          </div>
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width:75%">
              <span class="sr-only">75% Complete</span>
            </div>
          </div>


          <div class= "esg">
            Governance Impact
          </div>
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="84" aria-valuemin="0" aria-valuemax="100" style="width:84%">
              <span class="sr-only">84% Complete</span>
            </div>
          </div>
        </div>

      </div> 





      <div class = "col-md-4 column-height">
        <div class = 'column-title'>
          Volunteer time
        </div>
        <div class = "value">
          20<span class = "val-unit">hrs</span>
        </div>
        <div class = "mini-graph">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100" style="width:33%">
              <span class="sr-only">33% Complete</span>
            </div>
          </div>
        </div>
        <div class= "val-caption">
          20 hrs/60 hrs paid volunteer time used
        </div>
        <div class = "value">
          130<span class = "val-unit">hrs</span>
        </div>
        <div class = "mini-graph">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width:15%">
              <span class="sr-only">15% Complete</span>
            </div>
          </div>
        </div>
        <div class= "val-caption">
          130 hrs/900 hrs paid volunteer time used by my team
        </div>

        <div>
          <button class = "btn btn-default btn-esg" ng-click="c.test()">Log volunteer time </button>
        </div>

      </div>


      <div class = "col-md-4 column-height">
        <div class = 'column-title'>
          Charity Donation
        </div>
        <div class = "value">
          240<span class = "val-unit">.00 {{data.currency}}</span>
        </div>
        <div class = "mini-graph">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:40%">
              <span class="sr-only">40% Complete</span>
            </div>
          </div>
        </div>
        <div class= "val-caption">
          {{data.symbol}}240 / {{data.symbol}}600 company matched donation 
        </div>
        <div class = "value">
          890<span class = "val-unit">.00 {{data.currency}}</span>
        </div>
        <div class = "mini-graph">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100" style="width:35%">
              <span class="sr-only">35% Complete</span>
            </div>
          </div>
        </div>
        <div class= "val-caption">
          {{data.symbol}}890 / {{data.symbol}}2500 company matched donation made by team 
        </div>
        <div>
          <button class = "btn btn-default btn-esg" ng-click="c.reset()">Request a match </button>
        </div>

      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
